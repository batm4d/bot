<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SANTA MARKET - Web App</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #667eea;
            --primary-dark: #5a67d8;
            --secondary: #764ba2;
            --success: #48bb78;
            --danger: #f56565;
            --light: #f7fafc;
            --dark: #2d3748;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }

        .app-container { max-width: 480px; margin: 0 auto; background: white; min-height: 100vh; }
        .app-header { background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%); color: white; padding: 20px; text-align: center; }
        .app-header h1 { font-size: 24px; margin-bottom: 5px; }

        .app-nav { display: flex; background: var(--light); padding: 10px; gap: 5px; }
        .nav-btn { flex: 1; padding: 12px; border: none; background: white; border-radius: 10px; cursor: pointer; color: var(--dark); }
        .nav-btn.active { background: var(--primary); color: white; }

        .app-content { padding: 20px; min-height: calc(100vh - 160px); }
        .section { display: none; }
        .section.active { display: block; }

        .btn { padding: 12px 20px; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; }
        .btn-primary { background: var(--primary); color: white; width: 100%; }
        .btn-success { background: var(--success); color: white; }
        .btn-danger { background: var(--danger); color: white; }

        .form-group { margin-bottom: 15px; }
        .form-group input { width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 8px; }

        .product-card { border: 1px solid #e2e8f0; border-radius: 10px; padding: 15px; margin-bottom: 15px; }
        .product-card img { width: 100%; height: 200px; object-fit: cover; border-radius: 8px; }

        .notification { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background: var(--success); color: white; padding: 15px 25px; border-radius: 10px; display: none; }
        .notification.active { display: block; }
    </style>
</head>
<body>
    <div class="app-container" id="app">
        <div class="app-header">
            <div style="width: 60px; height: 60px; background: white; border-radius: 50%; margin: 0 auto 15px; display: flex; align-items: center; justify-content: center; font-size: 30px; color: #667eea;">üéÖ</div>
            <h1>SANTA MARKET</h1>
            <p>–ê–Ω–æ–Ω–∏–º–Ω—ã–µ –ø–æ–∫—É–ø–∫–∏ ‚Ä¢ 2 –≥–æ–¥–∞ –Ω–∞ —Ä—ã–Ω–∫–µ</p>
        </div>

        <nav class="app-nav">
            <button class="nav-btn active" onclick="showSection('home')">üè† –ì–ª–∞–≤–Ω–∞—è</button>
            <button class="nav-btn" onclick="showSection('menu')">üõç –ú–µ–Ω—é</button>
            <button class="nav-btn" onclick="showSection('cart')">üõí –ö–æ—Ä–∑–∏–Ω–∞</button>
            <button class="nav-btn" onclick="showSection('profile')">üë§ –ü—Ä–æ—Ñ–∏–ª—å</button>
        </nav>

        <main class="app-content">
            <!-- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è -->
            <section id="auth" class="section active">
                <h2>–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h2>
                <div class="auth-tabs">
                    <button class="btn" onclick="showAuthTab('login')">–í—Ö–æ–¥</button>
                    <button class="btn" onclick="showAuthTab('register')">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
                </div>

                <div id="loginForm">
                    <div class="form-group">
                        <input type="text" id="loginUsername" placeholder="–õ–æ–≥–∏–Ω">
                    </div>
                    <div class="form-group">
                        <input type="password" id="loginPassword" placeholder="–ü–∞—Ä–æ–ª—å">
                    </div>
                    <button class="btn btn-primary" onclick="login()">–í–æ–π—Ç–∏</button>
                </div>

                <div id="registerForm" style="display: none;">
                    <div class="form-group">
                        <input type="text" id="regUsername" placeholder="–õ–æ–≥–∏–Ω">
                    </div>
                    <div class="form-group">
                        <input type="password" id="regPassword" placeholder="–ü–∞—Ä–æ–ª—å">
                    </div>
                    <div class="form-group">
                        <input type="password" id="regConfirmPassword" placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
                    </div>
                    <button class="btn btn-primary" onclick="register()">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                </div>
            </section>

            <!-- –ì–ª–∞–≤–Ω–∞—è -->
            <section id="home" class="section">
                <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h2>
                <p>–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–¥–µ–ª –≤ –º–µ–Ω—é –≤—ã—à–µ</p>
            </section>

            <!-- –ú–µ–Ω—é -->
            <section id="menu" class="section">
                <h2>–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤</h2>
                <div id="categoriesList">
                    <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
                <div id="productsList">
                    <!-- –¢–æ–≤–∞—Ä—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </section>

            <!-- –ö–æ—Ä–∑–∏–Ω–∞ -->
            <section id="cart" class="section">
                <h2>–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h2>
                <div id="cartItems">
                    <!-- –¢–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω–µ -->
                </div>
                <div id="cartTotal" style="font-size: 24px; font-weight: bold; margin: 20px 0;">0 ‚ÇΩ</div>
                <button class="btn btn-primary" onclick="showSection('checkout')">üí≥ –ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–ø–ª–∞—Ç–µ</button>
            </section>

            <!-- –û–ø–ª–∞—Ç–∞ -->
            <section id="checkout" class="section">
                <h2>–û–ø–ª–∞—Ç–∞</h2>
                <div id="paymentMethods">
                    <button class="btn" onclick="selectPayment('cryptobot')">üîÑ CryptoBot</button>
                    <button class="btn" onclick="selectPayment('btc')">‚Çø Bitcoin</button>
                    <button class="btn" onclick="selectPayment('usdt')">üíé USDT</button>
                </div>
                <div id="paymentDetails" style="display: none;">
                    <h3>–î–µ—Ç–∞–ª–∏ –æ–ø–ª–∞—Ç—ã</h3>
                    <p id="paymentInfo"></p>
                    <button class="btn btn-success" onclick="confirmPayment()">‚úÖ –Ø –æ–ø–ª–∞—Ç–∏–ª</button>
                </div>
            </section>

            <!-- –ü—Ä–æ—Ñ–∏–ª—å -->
            <section id="profile" class="section">
                <h2>–í–∞—à –ø—Ä–æ—Ñ–∏–ª—å</h2>
                <div id="profileData">
                    <!-- –î–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è -->
                </div>
                <button class="btn" onclick="showSection('settings')">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
            </section>

            <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
            <section id="settings" class="section">
                <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è</h2>
                <div class="form-group">
                    <input type="text" id="settingCity" placeholder="–ì–æ—Ä–æ–¥">
                </div>
                <div class="form-group">
                    <select id="settingDelivery" class="form-select">
                        <option value="">–°–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è</option>
                        <option value="post">üìÆ –ü–æ—á—Ç–æ–π</option>
                        <option value="courier">üì• –ö—É—Ä—å–µ—Ä–æ–º</option>
                        <option value="home">üè† –î–æ—Å—Ç–∞–≤–∫–∞ –¥–æ –¥–æ–º–∞</option>
                    </select>
                </div>
                <button class="btn btn-primary" onclick="saveSettings()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </section>
        </main>

        <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ -->
        <div class="notification" id="notification"></div>
    </div>

    <script src="https://telegram.org/js/telegram-web-app.js?59"></script>
    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.MainButton.hide();

        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let currentUser = null;
        let cart = [];
        let selectedPayment = null;
        let currentProduct = null;

        // –ü–æ–∫–∞–∑–∞—Ç—å —Å–µ–∫—Ü–∏—é
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));

            document.getElementById(sectionId).classList.add('active');

            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
            const navMap = {
                'home': 0, 'menu': 1, 'cart': 2, 'profile': 3
            };
            if (navMap[sectionId] !== undefined) {
                document.querySelectorAll('.nav-btn')[navMap[sectionId]].classList.add('active');
            }

            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å–µ–∫—Ü–∏–∏
            switch(sectionId) {
                case 'menu': loadCategories(); break;
                case 'cart': loadCart(); break;
                case 'profile': loadProfile(); break;
            }
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –≤–∫–ª–∞–¥–∫—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
        function showAuthTab(tab) {
            document.getElementById('loginForm').style.display = tab === 'login' ? 'block' : 'none';
            document.getElementById('registerForm').style.display = tab === 'register' ? 'block' : 'none';
        }

        // –û—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –±–æ—Ç–∞
        function sendToBot(data) {
            tg.sendData(JSON.stringify(data));
        }

        // –°–ª—É—à–∞—Ç—å –æ—Ç–≤–µ—Ç—ã –æ—Ç –±–æ—Ç–∞
        tg.onEvent('webAppDataReceived', (event) => {
            try {
                const data = JSON.parse(event.data);
                handleBotResponse(data);
            } catch (e) {
                console.error('–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –æ—Ç –±–æ—Ç–∞:', e);
            }
        });

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç –±–æ—Ç–∞
        function handleBotResponse(data) {
            console.log('–û—Ç–≤–µ—Ç –æ—Ç –±–æ—Ç–∞:', data);

            switch(data.type) {
                case 'auth_success':
                    currentUser = data.user;
                    localStorage.setItem('user', JSON.stringify(currentUser));
                    showNotification('–í—Ö–æ–¥ —É—Å–ø–µ—à–µ–Ω!');
                    showSection('home');
                    break;

                case 'auth_error':
                    showNotification(data.error, 'error');
                    break;

                case 'register_success':
                    currentUser = data.user;
                    localStorage.setItem('user', JSON.stringify(currentUser));
                    showNotification('–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞!');
                    showSection('home');
                    break;

                case 'register_error':
                    showNotification(data.error, 'error');
                    break;

                case 'profile_data':
                    updateProfileDisplay(data.data);
                    break;

                case 'profile_updated':
                    showNotification('–ü—Ä–æ—Ñ–∏–ª—å –æ–±–Ω–æ–≤–ª–µ–Ω!');
                    loadProfile();
                    break;

                case 'cart_data':
                    updateCartDisplay(data.data);
                    break;

                case 'cart_updated':
                    loadCart();
                    showNotification('–ö–æ—Ä–∑–∏–Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞!');
                    break;

                case 'products_data':
                    displayProducts(data.data);
                    break;

                case 'order_created':
                    if (data.success) {
                        showNotification(`–ó–∞–∫–∞–∑ #${data.order_id} —Å–æ–∑–¥–∞–Ω! –°—É–º–º–∞: ${data.total}‚ÇΩ`);
                        showSection('home');
                    } else {
                        showNotification(data.error, 'error');
                    }
                    break;
            }
        }

        // –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
        function login() {
            const login = document.getElementById('loginUsername').value;
            const password = document.getElementById('loginPassword').value;

            if (!login || !password) {
                showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è', 'error');
                return;
            }

            sendToBot({
                type: 'login',
                data: { login, password }
            });
        }

        // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
        function register() {
            const login = document.getElementById('regUsername').value;
            const password = document.getElementById('regPassword').value;
            const confirmPassword = document.getElementById('regConfirmPassword').value;

            if (!login || !password || !confirmPassword) {
                showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è', 'error');
                return;
            }

            if (password !== confirmPassword) {
                showNotification('–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç', 'error');
                return;
            }

            sendToBot({
                type: 'register',
                data: { login, password }
            });
        }

        // –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
        function loadProfile() {
            if (currentUser) {
                sendToBot({ type: 'get_profile' });
            }
        }

        // –û–±–Ω–æ–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
        function updateProfileDisplay(profile) {
            document.getElementById('profileData').innerHTML = `
                <p><strong>–õ–æ–≥–∏–Ω:</strong> ${profile.login || '–ù–µ —É–∫–∞–∑–∞–Ω'}</p>
                <p><strong>–ì–æ—Ä–æ–¥:</strong> ${profile.city || '–ù–µ —É–∫–∞–∑–∞–Ω'}</p>
                <p><strong>–°–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è:</strong> ${getDeliveryMethodText(profile.delivery_method)}</p>
            `;
        }

        // –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        function loadCategories() {
            sendToBot({ type: 'get_products' });
        }

        // –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Ç–æ–≤–∞—Ä—ã
        function displayProducts(products) {
            const categoriesList = document.getElementById('categoriesList');
            const productsList = document.getElementById('productsList');

            // –ì—Ä—É–ø–ø–∏—Ä—É–µ–º —Ç–æ–≤–∞—Ä—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
            const categories = [...new Set(products.map(p => p.category))];

            categoriesList.innerHTML = categories.map(category => `
                <div class="category-card" onclick="loadCategoryProducts('${category}')">
                    <h3>${category}</h3>
                </div>
            `).join('');

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            productsList.innerHTML = products.map(product => `
                <div class="product-card">
                    <img src="${product.photo_url}" alt="${product.name}">
                    <h3>${product.name}</h3>
                    <p>${product.description}</p>
                    <p><strong>${product.price} ‚ÇΩ</strong></p>
                    ${product.weight_available ? `
                        <button class="btn" onclick="selectWeight(${product.id}, '${product.name}', ${product.price})">
                            –í—ã–±—Ä–∞—Ç—å –≤–µ—Å
                        </button>
                    ` : `
                        <button class="btn btn-primary" onclick="addToCart(${product.id}, '${product.name}', ${product.price})">
                            –í –∫–æ—Ä–∑–∏–Ω—É
                        </button>
                    `}
                </div>
            `).join('');
        }

        // –í—ã–±—Ä–∞—Ç—å –≤–µ—Å
        function selectWeight(productId, productName, price) {
            const weight = prompt('–í–≤–µ–¥–∏—Ç–µ –≤–µ—Å –≤ –∫–≥ (–Ω–∞–ø—Ä–∏–º–µ—Ä: 0.5, 1, 2):');
            if (weight && !isNaN(weight)) {
                const totalPrice = price * parseFloat(weight);
                addToCart(productId, `${productName} (${weight} –∫–≥)`, totalPrice, weight);
            }
        }

        // –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É
        function addToCart(productId, productName, price, weight = null) {
            sendToBot({
                type: 'add_to_cart',
                data: {
                    product_id: productId,
                    product_name: productName,
                    price: price,
                    weight: weight,
                    quantity: 1
                }
            });
        }

        // –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É
        function loadCart() {
            sendToBot({ type: 'get_cart' });
        }

        // –û–±–Ω–æ–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω—ã
        function updateCartDisplay(data) {
            cart = data.items;

            if (cart.length === 0) {
                document.getElementById('cartItems').innerHTML = '<p>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>';
            } else {
                document.getElementById('cartItems').innerHTML = cart.map(item => `
                    <div class="cart-item">
                        <p><strong>${item.name}</strong></p>
                        <p>${item.quantity} —à—Ç. ‚Ä¢ ${item.price} ‚ÇΩ</p>
                        <button class="btn btn-danger" onclick="removeFromCart(${item.id})">–£–¥–∞–ª–∏—Ç—å</button>
                    </div>
                `).join('');
            }

            document.getElementById('cartTotal').textContent = `${data.total} ‚ÇΩ`;
        }

        // –£–¥–∞–ª–∏—Ç—å –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
        function removeFromCart(itemId) {
            sendToBot({
                type: 'remove_from_cart',
                data: { item_id: itemId }
            });
        }

        // –í—ã–±—Ä–∞—Ç—å —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã
        function selectPayment(method) {
            selectedPayment = method;
            document.getElementById('paymentDetails').style.display = 'block';

            let paymentInfo = '';
            switch(method) {
                case 'cryptobot':
                    paymentInfo = '–û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ CryptoBot (USDT)';
                    break;
                case 'btc':
                    paymentInfo = '–û–ø–ª–∞—Ç–∞ Bitcoin';
                    break;
                case 'usdt':
                    paymentInfo = '–û–ø–ª–∞—Ç–∞ USDT (TRC20)';
                    break;
            }

            document.getElementById('paymentInfo').textContent = paymentInfo;
        }

        // –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –æ–ø–ª–∞—Ç—É
        function confirmPayment() {
            if (!selectedPayment) {
                showNotification('–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã', 'error');
                return;
            }

            sendToBot({
                type: 'create_order',
                data: { payment_method: selectedPayment }
            });
        }

        // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
        function saveSettings() {
            const city = document.getElementById('settingCity').value;
            const deliveryMethod = document.getElementById('settingDelivery').value;

            sendToBot({
                type: 'update_profile',
                data: { city, delivery_method: deliveryMethod }
            });
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = 'notification';
            notification.classList.add('active');

            if (type === 'error') {
                notification.style.background = '#f56565';
            } else {
                notification.style.background = '#48bb78';
            }

            setTimeout(() => {
                notification.classList.remove('active');
            }, 3000);
        }

        // –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—Å—Ç —Å–ø–æ—Å–æ–±–∞ –¥–æ—Å—Ç–∞–≤–∫–∏
        function getDeliveryMethodText(method) {
            switch(method) {
                case 'post': return 'üìÆ –ü–æ—á—Ç–æ–π';
                case 'courier': return 'üì• –ö—É—Ä—å–µ—Ä–æ–º';
                case 'home': return 'üè† –î–æ—Å—Ç–∞–≤–∫–∞ –¥–æ –¥–æ–º–∞';
                default: return '–ù–µ —É–∫–∞–∑–∞–Ω';
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', () => {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
            const savedUser = localStorage.getItem('user');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                showSection('home');
            } else {
                showSection('auth');
            }

            // –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
            loadCategories();
        });
    </script>
</body>
</html>